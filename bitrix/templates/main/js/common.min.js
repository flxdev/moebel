function focusInput(){var e=$(".input-box"),t=$(".input-label");$(e).on("focus",function(){$(this).parents().closest(".box-input").find(".form-label").find(t).addClass("label-focus")}),$(e).on("focusout",function(){null!=this&&0==this.value.length?$(this).parents().closest(".box-input").find(".form-label").find(t).removeClass("label-focus"):$(this).parents().closest(".box-input").find(".form-label").find(t).addClass("label-focus")})}function scrollUp(){$(".btn-scroll-top").click(function(){$("body,html").animate({scrollTop:0},800)})}function autoTextarea(){$("textarea").autosize()}function scrollForm(){$("a.anchor-touch").click(function(){var e=$(this).attr("href"),t=$(e).offset().top;return jQuery("html:not(:animated),body:not(:animated)").animate({scrollTop:t},800),$(".input-name").focus(),!1})}function initFile(){var e=document.querySelectorAll(".inputfile");Array.prototype.forEach.call(e,function(e){var t=e.nextElementSibling,o=t.innerHTML;e.addEventListener("change",function(e){var i="";i=this.files&&this.files.length>1?(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value.split("\\").pop(),i?t.querySelector("span").innerHTML=i:t.innerHTML=o})})}function initMouseMove(){var e=20,t=e/$(window).height(),o=e/$(window).width();$(".container-wrapper").mousemove(function(e){var i=e.pageX-$(window).width()/2,n=e.pageY-$(window).height()/2,s=o*i*-1-5,a=t*n*-1-5;$(".mouseov").css("background-position",s+"px     "+a+"px")})}function Parallax(e){$(window).on("scroll",function(){var t,o,i,n,s,a,r,l,p,c,f,d,u=$(window).scrollTop(),h=$("body").scrollHeight,g={};e.each(function(){return g={},t=$(this),f=t.data("axis")||"y",d=0,bottomBorder=0,!!t.length&&(o=t.closest(".js-parallax-wrapper").length?t.closest(".js-parallax-wrapper"):t.parent(),i=o[0].getBoundingClientRect(),a=parseInt(t.data("speed"),10)/109||.2,r=parseInt(t.data("direction"),10)||1,n=o.offset().top,s=($(window).height()-i.height+850)/2,0>s&&u+i.top<=d&&(s=0),l=Math.round((i.top-s)*a)*r,0===u?l=0:(p=h,c=$(window).height()+u,p-n-o.innerHeight()<=2&&(p-c)/p===0&&(l=0)),g[f]=l,void TweenLite.to(t,1,g))})})}function simpleParallax(){var e=$(window).scrollTop()+1;$(".container-header-parallax").css({transform:"translate3d(0px, "+-(1*e)+"px, 0px)"}),$(".container-main-thumbs_parallax-text").css({transform:"translate3d(0px, "+-(.7*e)+"px, 0px)",opacity:1-.0085*e}),$(".container-parallax-img").css({transform:"translate3d(0px, "+ +(8*e)+"px, 0px)",opacity:1-.07*e}),$(".container-main-thumbs-t_parallax").css({transform:"translate3d(0px, "+-(.1*e)+"px, 0px)",opacity:0+.01*e})}function initFixSliderAbout(){var e=$(this).scrollTop(),t=$(".container-wrapper-contant").height()+$(".container-wrapper-what-did").height()+$(".container-wrapper-about").height()+$(".wrapper-stages-production_title").height()+140,o=$("#slide-img-1"),i=$("#slide-img-2"),n=$("#slide-img-3"),s=$("#slide-img-4"),a=$("#img-1"),r=$("#img-2"),l=$("#img-3"),p=$("#img-4"),c=t+1.55*o.height(),f=c+1.25*i.height(),d=f+1.75*n.height(),u=d+1.3*s.height();e>=t&&e<c?(o.find(".wrapper-stages-production_list_number").addClass("greenOpacity"),a.css({opacity:"1",left:"0"})):(o.find(".wrapper-stages-production_list_number").removeClass("greenOpacity"),a.css({opacity:"0",left:"-50%"})),e>=c&&e<f?(i.find(".wrapper-stages-production_list_number").addClass("greenOpacity"),r.css({opacity:"1",left:"0"})):(i.find(".wrapper-stages-production_list_number").removeClass("greenOpacity"),r.css({opacity:"0",left:"-50%"})),e>=f&&e<d?(n.find(".wrapper-stages-production_list_number").addClass("greenOpacity"),l.css({opacity:"1",left:"0"})):(n.find(".wrapper-stages-production_list_number").removeClass("greenOpacity"),l.css({opacity:"0",left:"-50%"})),e>=d&&e<u?(s.find(".wrapper-stages-production_list_number").addClass("greenOpacity"),p.css({opacity:"1",left:"0"})):(s.find(".wrapper-stages-production_list_number").removeClass("greenOpacity"),p.css({opacity:"0",left:"-50%"})),Revealator.effects_padding="-220"}function initOpacityBest(){var e=$(this).scrollTop(),t=$(".container-wrapper-contant").height()+$(".container-wrapper-what-did").height()+$(".container-wrapper-about").height()+$(".container-wrapper-stages-production").height()-100;e>=t?$(".container-wrapper-best").css("opacity","1"):$(".container-wrapper-best").css("opacity","0")}function initAnimate(){$(".container-popup-portfolio-img_list").addClass("hidden").viewportChecker({classToAdd:"visible animated fadeIn",offset:100})}focusInput(),scrollUp(),autoTextarea(),scrollForm(),initFile(),initMouseMove(),$(window).scroll(function(e){simpleParallax(),initFixSliderAbout(),initOpacityBest();var t=$(this).scrollTop(),o=$(".container-main-thumbs").height()+$(".container-main-thumbs-t").height(),i=$(".container-main-thumbs").height()+$(".container-main-thumbs-t").height()+$(".container-design-home").height()-900,n=$(".out").height()+$(".footer").height()-890,s=$(".out").height()-60;t>=o&&t<i?$(".container-design-home-bg").css("opacity","1"):$(".container-design-home-bg").css("opacity","0"),t>=s?($(".icon-logo .fill").css("fill","#75706b"),$(".icon-mail .feedback-fill-circle").css("fill","#75706b")):($(".icon-logo .fill").css("fill","#d9b189"),$(".icon-mail .feedback-fill-circle").css("fill","#c9db75")),t>=n?$(".box-scroll").addClass("show-scroll-top"):$(".box-scroll").removeClass("show-scroll-top")}),$(".parallax").length&&Parallax($(".parallax"));var BarbaWidget={init:function(){var e=this;Barba.Pjax.start(),Barba.Prefetch.init(),Barba.Pjax.getTransition=function(){return e.MovePage}},MovePage:Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.fadeOut()]).then(this.movePages.bind(this))},initVideo:function(){$(".wrapper-about_video-img-box").mouseover(function(){$(".wrapper-about_img").css("opacity","0"),$(this).find("video").length&&$(this).find("video")[0].play()}),$(".wrapper-about_video-img-box").mouseout(function(){$(".wrapper-about_img").css("opacity","1"),$(this).find("video").length&&$(this).find("video")[0].pause()})},initFixBlock:function(){$(".sticky").Stickyfill()},initSwiperGallery:function(){new Swiper(".swiper-slider-about-gallery",{paginationClickable:!0,loop:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev",pagination:".swiper-pagination",paginationType:"fraction",speed:800})},initHoverSwiper:function(){$(".hoverBtn").mouseover(function(){$(".swiper-slider-about-gallery .swiper-slide-img > img").css("transform","scale(1.1)")}),$(".hoverBtn").mouseout(function(){$(".swiper-slider-about-gallery .swiper-slide-img > img").css("transform","scale(1)")}),$(".hoverBtn").mouseover(function(){$(".swiper-slider-news .swiper-slide > img").css("transform","scale(1.1)")}),$(".hoverBtn").mouseout(function(){$(".swiper-slider-news .swiper-slide > img").css("transform","scale(1)")})},initPopupPortfolio:function(){$(".popup-portfolio").click(function(){$(this).addClass("open-popup"),$("body,html").animate({scrollTop:0},200),$(".container-overflow").addClass("overflow-open"),$(".container-popup-portfolio").css("right","0"),$("body").addClass("overflow-hidden"),event.preventDefault()}),$(".container-overflow").click(function(){$(this).removeClass("overflow-open"),$(".container-popup-portfolio").css("right","-115%"),$("body").removeClass("overflow-hidden")}),$(".brn-close-popup").click(function(){$(".container-overflow").removeClass("overflow-open"),$(".container-popup-portfolio").css("right","-115%"),$("body").removeClass("overflow-hidden")}),$(".make-order-popup").click(function(){$(".container-overflow").removeClass("overflow-open"),$(".container-popup-portfolio").css("right","-115%"),$("body").removeClass("overflow-hidden")})},initMouseMove:function(){var e=20,t=e/$(window).height(),o=e/$(window).width();$(".container-wrapper").mousemove(function(e){var i=e.pageX-$(window).width()/2,n=e.pageY-$(window).height()/2,s=o*i*-1-5,a=t*n*-1-5;$(".mouseov").css("background-position",s+"px     "+a+"px")})},scrollForm:function(){$("a.anchor-touch").click(function(){var e=$(this).attr("href"),t=$(e).offset().top;return jQuery("html:not(:animated),body:not(:animated)").animate({scrollTop:t},800),$(".input-name").focus(),!1})},focusInput:function(){var e=$(".input-box"),t=$(".input-label");$(e).on("focus",function(){$(this).parents().closest(".box-input").find(".form-label").find(t).addClass("label-focus")}),$(e).on("focusout",function(){null!=this&&0==this.value.length?$(this).parents().closest(".box-input").find(".form-label").find(t).removeClass("label-focus"):$(this).parents().closest(".box-input").find(".form-label").find(t).addClass("label-focus")})},fadeOut:function(){return $(this.oldContainer).animate({opacity:0}).promise()},movePages:function(){function e(e){$(window).on("scroll",function(){var t,o,i,n,s,a,r,l,p,c,f,d,u=$(window).scrollTop(),h=$("body").scrollHeight,g={};e.each(function(){return g={},t=$(this),f=t.data("axis")||"y",d=0,bottomBorder=0,!!t.length&&(o=t.closest(".js-parallax-wrapper").length?t.closest(".js-parallax-wrapper"):t.parent(),i=o[0].getBoundingClientRect(),a=parseInt(t.data("speed"),10)/109||.2,r=parseInt(t.data("direction"),10)||1,n=o.offset().top,s=($(window).height()-i.height+850)/2,0>s&&u+i.top<=d&&(s=0),l=Math.round((i.top-s)*a)*r,0===u?l=0:(p=h,c=$(window).height()+u,p-n-o.innerHeight()<=2&&(p-c)/p===0&&(l=0)),g[f]=l,void TweenLite.to(t,1,g))})})}var t=this;this.initVideo(),this.initFixBlock(),this.initSwiperGallery(),this.initHoverSwiper(),this.initPopupPortfolio(),this.initMouseMove(),this.scrollForm(),this.focusInput(),TweenLite.set(this.newContainer,{visibility:"visible",xPercent:100,position:"absolute",left:0,top:0,right:0}),TweenLite.to(this.oldContainer,.6,{xPercent:-100}),TweenLite.to(this.newContainer,.6,{xPercent:0,onComplete:function(){TweenLite.set(t.newContainer,{clearProps:"all"}),t.done()}}),$(".parallax").length&&e($(".parallax")),$(window).scroll(function(e){})}})},MapPage=Barba.BaseView.extend({namespace:"map-page",onEnterCompleted:function(){function e(){var e={lat:57.0162005,lng:24.1228066},t=new google.maps.Map(document.getElementById("map"),{center:e,zoom:15,disableDefaultUI:!1,scrollwheel:!1,styles:[{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]}]}),o={url:"img/icon-map.png",size:new google.maps.Size(80,80),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(35,35)};marker=new google.maps.Marker({position:e,map:t,icon:o})}setTimeout(e,500)}}),NewsPage=Barba.BaseView.extend({namespace:"news-page",onEnterCompleted:function(){function e(){$(".popup-news").click(function(){$(this).addClass("open-popup"),$("body,html").animate({scrollTop:0},200),$(".container-overflow").addClass("overflow-open"),$(".container-popup-news").css("right","0"),$("body").addClass("overflow-hidden"),event.preventDefault()}),$(".container-overflow").click(function(){$(this).removeClass("overflow-open"),$(".container-popup-news").css("right","-100%"),$("body").removeClass("overflow-hidden")}),$(".brn-close-popup").click(function(){$(".container-overflow").removeClass("overflow-open"),$(".container-popup-news").css("right","-100%"),$("body").removeClass("overflow-hidden")})}function t(){new Swiper(".swiper-slider-news",{paginationClickable:!0,loop:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev",speed:800})}e(),t()}});document.addEventListener("DOMContentLoaded",function(){BarbaWidget.init(),MapPage.init(),NewsPage.init()});
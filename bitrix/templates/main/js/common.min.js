function focusInput(){var e=$(".input-box"),o=$(".input-label");$(e).on("focus",function(){$(this).parents().closest(".box-input").find(".form-label").find(o).addClass("label-focus")}),$(e).on("focusout",function(){null!=this&&0==this.value.length?$(this).parents().closest(".box-input").find(".form-label").find(o).removeClass("label-focus"):$(this).parents().closest(".box-input").find(".form-label").find(o).addClass("label-focus")})}function scrollUp(){$(".btn-scroll-top").click(function(){$("body,html").animate({scrollTop:0},800)})}function autoTextarea(){$("textarea").autosize()}function scrollForm(){$("a.anchor-touch").click(function(){var e=$(this).attr("href"),o=$(e).offset().top;return jQuery("html:not(:animated),body:not(:animated)").animate({scrollTop:o},800),$(".input-name").focus(),!1})}function initFile(){var e=document.querySelectorAll(".inputfile");Array.prototype.forEach.call(e,function(e){var o=e.nextElementSibling,t=o.innerHTML;e.addEventListener("change",function(e){var i="";i=this.files&&this.files.length>1?(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value.split("\\").pop(),i?o.querySelector("span").innerHTML=i:o.innerHTML=t})})}function initMouseMove(){var e=20,o=e/$(window).height(),t=e/$(window).width();$(".container-wrapper").mousemove(function(e){var i=e.pageX-$(window).width()/2,n=e.pageY-$(window).height()/2,r=t*i*-1-5,s=o*n*-1-5;$(".mouseov").css("background-position",r+"px     "+s+"px")})}function Parallax(e){$(window).on("scroll",function(){var o,t,i,n,r,s,a,l,p,c,f,u,d=$(window).scrollTop(),h=$("body").scrollHeight,m={};e.each(function(){return m={},o=$(this),f=o.data("axis")||"y",u=0,bottomBorder=0,!!o.length&&(t=o.closest(".js-parallax-wrapper").length?o.closest(".js-parallax-wrapper"):o.parent(),i=t[0].getBoundingClientRect(),s=parseInt(o.data("speed"),10)/109||.2,a=parseInt(o.data("direction"),10)||1,n=t.offset().top,r=($(window).height()-i.height+850)/2,0>r&&d+i.top<=u&&(r=0),l=Math.round((i.top-r)*s)*a,0===d?l=0:(p=h,c=$(window).height()+d,p-n-t.innerHeight()<=2&&(p-c)/p===0&&(l=0)),m[f]=l,void TweenLite.to(o,1,m))})})}function simpleParallax(){var e=$(window).scrollTop()+1;$(".container-header-parallax").css({transform:"translate3d(0px, "+-(1*e)+"px, 0px)"}),$(".container-main-thumbs_parallax-text").css({transform:"translate3d(0px, "+-(.7*e)+"px, 0px)",opacity:1-.0085*e}),$(".container-parallax-img").css({transform:"translate3d(0px, "+ +(8*e)+"px, 0px)",opacity:1-.07*e}),$(".container-main-thumbs-t_parallax").css({transform:"translate3d(0px, "+-(.1*e)+"px, 0px)",opacity:0+.01*e})}function initFixSliderAbout(){var e=$(this).scrollTop(),o=$(".container-wrapper-contant").height()+$(".container-wrapper-what-did").height()+$(".container-wrapper-about").height()+$(".wrapper-stages-production_title").height()+140,t=$("#slide-img-1"),i=$("#slide-img-2"),n=$("#slide-img-3"),r=$("#slide-img-4"),s=$("#img-1"),a=$("#img-2"),l=$("#img-3"),p=$("#img-4"),c=o+1.55*t.height(),f=c+1.25*i.height(),u=f+1.75*n.height(),d=u+1.3*r.height();e>=o&&e<c?(t.find(".wrapper-stages-production_list_number").addClass("greenOpacity"),s.css({opacity:"1",left:"0"})):(t.find(".wrapper-stages-production_list_number").removeClass("greenOpacity"),s.css({opacity:"0",left:"-50%"})),e>=c&&e<f?(i.find(".wrapper-stages-production_list_number").addClass("greenOpacity"),a.css({opacity:"1",left:"0"})):(i.find(".wrapper-stages-production_list_number").removeClass("greenOpacity"),a.css({opacity:"0",left:"-50%"})),e>=f&&e<u?(n.find(".wrapper-stages-production_list_number").addClass("greenOpacity"),l.css({opacity:"1",left:"0"})):(n.find(".wrapper-stages-production_list_number").removeClass("greenOpacity"),l.css({opacity:"0",left:"-50%"})),e>=u&&e<d?(r.find(".wrapper-stages-production_list_number").addClass("greenOpacity"),p.css({opacity:"1",left:"0"})):(r.find(".wrapper-stages-production_list_number").removeClass("greenOpacity"),p.css({opacity:"0",left:"-50%"})),Revealator.effects_padding="-220"}function initOpacityBest(){var e=$(this).scrollTop(),o=$(".container-wrapper-contant").height()+$(".container-wrapper-what-did").height()+$(".container-wrapper-about").height()+$(".container-wrapper-stages-production").height()-100;e>=o?$(".container-wrapper-best").css("opacity","1"):$(".container-wrapper-best").css("opacity","0")}function initAnimate(){$(".container-popup-portfolio-img_list").addClass("hidden").viewportChecker({classToAdd:"visible animated fadeIn",offset:100})}function initVideo(){$(".wrapper-about_video-img-box").mouseover(function(){$(".wrapper-about_img").css("opacity","0"),$(this).find("video").length&&$(this).find("video")[0].play()}),$(".wrapper-about_video-img-box").mouseout(function(){$(".wrapper-about_img").css("opacity","1"),$(this).find("video").length&&$(this).find("video")[0].pause()})}function initSwiperGallery(){new Swiper(".swiper-slider-about-gallery",{paginationClickable:!0,loop:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev",pagination:".swiper-pagination",paginationType:"fraction",speed:800})}function initPopupPortfolio(){$(".popup-portfolio").click(function(){$(this).addClass("open-popup"),$(".container-overflow").addClass("overflow-open"),$(".container-popup-portfolio").css("right","0"),$(".container-btn-portfolio").css("right","0"),$("body").addClass("overflow-hidden"),event.preventDefault()}),$(".container-overflow").click(function(){$(this).removeClass("overflow-open"),$(".container-popup-portfolio").css("right","-115%"),$(".container-btn-portfolio").css("right","-115%"),$("body").removeClass("overflow-hidden")}),$(".brn-close-popup").click(function(){$(".container-overflow").removeClass("overflow-open"),$(".container-popup-portfolio").css("right","-115%"),$(".container-btn-portfolio").css("right","-115%"),$("body").removeClass("overflow-hidden")})}function initMakeOrder(){$(".make-order-popup").click(function(){function e(){$("html:not(:animated),body:not(:animated)").animate({scrollTop:t},800),$(".input-name").focus()}$(".container-overflow").removeClass("overflow-open"),$(".container-popup-portfolio").css("right","-115%"),$(".container-btn-portfolio").css("right","-115%"),$("body").removeClass("overflow-hidden");var o=$(this).attr("href"),t=$(o).offset().top;return setTimeout(e,450),!1})}function initHoverSwiper(){$(".hoverBtn").mouseover(function(){$(".swiper-slider-about-gallery .swiper-slide-img > img").css("transform","scale(1.1)")}),$(".hoverBtn").mouseout(function(){$(".swiper-slider-about-gallery .swiper-slide-img > img").css("transform","scale(1)")}),$(".hoverBtn").mouseover(function(){$(".swiper-slider-news .swiper-slide > img").css("transform","scale(1.1)")}),$(".hoverBtn").mouseout(function(){$(".swiper-slider-news .swiper-slide > img").css("transform","scale(1)")})}function initPopupNews(){$(".popup-news").click(function(){var e=$(this).data("link-news");console.log(e);var o=$("body").find("[data-news='"+e+"']");$(this).addClass("open-popup"),$(".container-overflow").addClass("overflow-open"),o.css("right","0"),$("body").addClass("overflow-hidden"),event.preventDefault()}),$(".container-overflow").click(function(){$(this).removeClass("overflow-open"),$(".container-popup-news").css("right","-100%"),$(".container-btn-news").css("right","-115%"),$("body").removeClass("overflow-hidden")}),$(".brn-close-popup").click(function(){$(".container-overflow").removeClass("overflow-open"),$(".container-popup-news").css("right","-100%"),$(".container-btn-news").css("right","-115%"),$("body").removeClass("overflow-hidden")})}function initSwiperNews(){new Swiper(".swiper-slider-news",{paginationClickable:!0,loop:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev",speed:800})}function initDropzone(){Dropzone.options.myAwesomeDropzone={paramName:"file",maxFilesize:2,dictDefaultMessage:"Attach file",addRemoveLinks:!0,previewTemplate:document.getElementById("preview-template").innerHTML,accept:function(e,o){console.log("efefef"),"justinbieber.jpg"==e.name?o("Naha, you don't."):o()}}}function initValidForm(){var e=$(".js-form");e.length&&e.each(function(){var e=$(this);$.validate({form:e,borderColorOnError:!0,scrollToTopOnError:!1,modules:"html5"})})}$(window).scroll(function(e){simpleParallax(),initFixSliderAbout(),initOpacityBest();var o=$(this).scrollTop(),t=$(".container-main-thumbs").height()+$(".container-main-thumbs-t").height(),i=$(".container-main-thumbs").height()+$(".container-main-thumbs-t").height()+$(".container-design-home").height()-900,n=$(".out").height()+$(".footer").height()-890,r=$(".out").height()-60;o>=t&&o<i?$(".container-design-home-bg").css("opacity","1"):$(".container-design-home-bg").css("opacity","0"),o>=r?($(".icon-logo .fill").css("fill","#75706b"),$(".icon-mail .feedback-fill-circle").css("fill","#75706b")):($(".icon-logo .fill").css("fill","#d9b189"),$(".icon-mail .feedback-fill-circle").css("fill","#c9db75")),o>=n?$(".box-scroll").addClass("show-scroll-top"):$(".box-scroll").removeClass("show-scroll-top")}),$(".parallax").length&&Parallax($(".parallax"));var BarbaWidget={init:function(){var e=this;Barba.Pjax.start(),Barba.Pjax.getTransition=function(){return e.MovePage}},MovePage:Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.fadeOut()]).then(this.movePages.bind(this))},initFixBlock:function(){$(".sticky").Stickyfill()},initHoverSwiper:function(){$(".hoverBtn").mouseover(function(){$(".swiper-slider-about-gallery .swiper-slide-img > img").css("transform","scale(1.1)")}),$(".hoverBtn").mouseout(function(){$(".swiper-slider-about-gallery .swiper-slide-img > img").css("transform","scale(1)")}),$(".hoverBtn").mouseover(function(){$(".swiper-slider-news .swiper-slide > img").css("transform","scale(1.1)")}),$(".hoverBtn").mouseout(function(){$(".swiper-slider-news .swiper-slide > img").css("transform","scale(1)")})},initMouseMove:function(){var e=20,o=e/$(window).height(),t=e/$(window).width();$(".container-wrapper").mousemove(function(e){var i=e.pageX-$(window).width()/2,n=e.pageY-$(window).height()/2,r=t*i*-1-5,s=o*n*-1-5;$(".mouseov").css("background-position",r+"px     "+s+"px")})},scrollForm:function(){$("a.anchor-touch").click(function(){var e=$(this).attr("href"),o=$(e).offset().top;return jQuery("html:not(:animated),body:not(:animated)").animate({scrollTop:o},800),$(".input-name").focus(),!1})},focusInput:function(){var e=$(".input-box"),o=$(".input-label");$(e).on("focus",function(){$(this).parents().closest(".box-input").find(".form-label").find(o).addClass("label-focus")}),$(e).on("focusout",function(){null!=this&&0==this.value.length?$(this).parents().closest(".box-input").find(".form-label").find(o).removeClass("label-focus"):$(this).parents().closest(".box-input").find(".form-label").find(o).addClass("label-focus")})},fadeOut:function(){return $(this.oldContainer).animate({opacity:0}).promise()},movePages:function(){function e(e){$(window).on("scroll",function(){var o,t,i,n,r,s,a,l,p,c,f,u,d=$(window).scrollTop(),h=$("body").scrollHeight,m={};e.each(function(){return m={},o=$(this),f=o.data("axis")||"y",u=0,bottomBorder=0,!!o.length&&(t=o.closest(".js-parallax-wrapper").length?o.closest(".js-parallax-wrapper"):o.parent(),i=t[0].getBoundingClientRect(),s=parseInt(o.data("speed"),10)/109||.2,a=parseInt(o.data("direction"),10)||1,n=t.offset().top,r=($(window).height()-i.height+850)/2,0>r&&d+i.top<=u&&(r=0),l=Math.round((i.top-r)*s)*a,0===d?l=0:(p=h,c=$(window).height()+d,p-n-t.innerHeight()<=2&&(p-c)/p===0&&(l=0)),m[f]=l,void TweenLite.to(o,1,m))})})}var o=this;this.initFixBlock(),this.initHoverSwiper(),this.initMouseMove(),this.scrollForm(),this.focusInput(),TweenLite.set(this.newContainer,{visibility:"visible",xPercent:100,position:"absolute",left:0,top:0,right:0}),TweenLite.to(this.oldContainer,.6,{xPercent:-100}),TweenLite.to(this.newContainer,.6,{xPercent:0,onComplete:function(){TweenLite.set(o.newContainer,{clearProps:"all"}),o.done()}}),$(".parallax").length&&e($(".parallax")),$(window).scroll(function(e){})}})},MapPage=Barba.BaseView.extend({namespace:"map-page",onEnterCompleted:function(){function e(){var e={lat:57.0162005,lng:24.1228066},o=new google.maps.Map(document.getElementById("map"),{center:e,zoom:15,disableDefaultUI:!1,scrollwheel:!1,styles:[{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]}]}),t={url:"img/icon-map.png",size:new google.maps.Size(80,80),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(35,35)};marker=new google.maps.Marker({position:e,map:o,icon:t})}setTimeout(e,500)}}),NewsPage=Barba.BaseView.extend({namespace:"news-page",onEnterCompleted:function(){function e(){$(".popup-news").click(function(){var e=$(this).data("link-news");console.log(e);var o=$("body").find("[data-news='"+e+"']");$(this).addClass("open-popup"),$(".container-overflow").addClass("overflow-open"),o.css("right","0"),$("body").addClass("overflow-hidden"),event.preventDefault()}),$(".container-overflow").click(function(){$(this).removeClass("overflow-open"),$(".container-popup-news").css("right","-100%"),$("body").removeClass("overflow-hidden")}),$(".brn-close-popup").click(function(){$(".container-overflow").removeClass("overflow-open"),$(".container-popup-news").css("right","-100%"),$("body").removeClass("overflow-hidden")})}function o(){new Swiper(".swiper-slider-news",{paginationClickable:!0,loop:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev",speed:800})}e(),o()}}),AboutPage=Barba.BaseView.extend({namespace:"about-page",onEnterCompleted:function(){function e(){$(".wrapper-about_video-img-box").mouseover(function(){$(".wrapper-about_img").css("opacity","0"),$(this).find("video").length&&$(this).find("video")[0].play()}),$(".wrapper-about_video-img-box").mouseout(function(){$(".wrapper-about_img").css("opacity","1"),$(this).find("video").length&&$(this).find("video")[0].pause()})}function o(){new Swiper(".swiper-slider-about-gallery",{paginationClickable:!0,loop:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev",pagination:".swiper-pagination",paginationType:"fraction",speed:800})}e(),o()}}),PortfolioPage=Barba.BaseView.extend({namespace:"portfolio-page",onEnterCompleted:function(){function e(){$(".popup-portfolio").click(function(){$(this).addClass("open-popup"),$(".container-overflow").addClass("overflow-open"),$(".container-popup-portfolio").css("right","0"),$("body").addClass("overflow-hidden"),event.preventDefault()}),$(".container-overflow").click(function(){$(this).removeClass("overflow-open"),$(".container-popup-portfolio").css("right","-115%"),$("body").removeClass("overflow-hidden")}),$(".brn-close-popup").click(function(){$(".container-overflow").removeClass("overflow-open"),$(".container-popup-portfolio").css("right","-115%"),$("body").removeClass("overflow-hidden")})}function o(){$(".make-order-popup").click(function(){function e(){$("html:not(:animated),body:not(:animated)").animate({scrollTop:t},800),$(".input-name").focus()}$(".container-overflow").removeClass("overflow-open"),$(".container-popup-portfolio").css("right","-115%"),$("body").removeClass("overflow-hidden");var o=$(this).attr("href"),t=$(o).offset().top;return setTimeout(e,450),!1})}e(),o()}});focusInput(),scrollUp(),autoTextarea(),scrollForm(),initMouseMove(),initVideo(),initSwiperGallery(),initPopupPortfolio(),initHoverSwiper(),initPopupNews(),initSwiperNews(),initMakeOrder(),initDropzone(),initValidForm(),BarbaWidget.init(),MapPage.init(),NewsPage.init(),AboutPage.init(),PortfolioPage.init();